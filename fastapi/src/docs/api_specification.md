# 📌 ChatBot-AI FastAPI 명세서

## 📢 개요
- **API 이름**: ChatBot-AI FastAPI
- **설명**: AI 모델 관리 API
- **버전**: 
- **로고**: 
  ![ChatBot-AI 로고](https://drive.google.com/thumbnail?id=12PqUS6bj4eAO_fLDaWQmoq94-771xfim)

이 API는 다양한 AI 모델을 활용하여 검색 기반 응답 생성 및 캐릭터 기반 대화를 제공하며, MongoDB와 연동하여 대화 기록을 관리합니다.

---

## 📍 엔드포인트 목록

### 🔹 루트 엔드포인트
- **`GET /`**
  - **설명**: 루트 엔드포인트
  - **응답**: `{ "message": "Welcome to ChatBot-AI API. Access from IP: [IP 주소]" }`

---

### 🔹 Office 모델 (정보 제공 모델)

#### 📌 Llama 모델 (Bllossom_8B)
- **`POST /office/Llama`**
  - **설명**: Bllossom_8B 모델이 검색 결과를 활용하여 답변을 생성합니다.
  - **요청 본문**
    ```json
    {
      "input_data": "Llama AI 모델의 출시일과 버전들을 각각 알려줘.",
      "google_access": false,
      "db_id": "123e4567-e89b-12d3-a456-426614174000",
      "user_id": "shaa97102"
    }
    ```
    | 필드명       | 타입    | 제약조건                       | 설명                                     | 예시                                              |
    | ------------ | ------- | ------------------------------ | ---------------------------------------- | ------------------------------------------------- |
    | input_data   | string  | minLength=1, maxLength=500     | 사용자 입력 문장                        | `"Llama AI 모델의 출시일과 버전들을 각각 알려줘."` |
    | google_access| boolean | 기본값: false                  | 검색 기반 액세스 (True: 활성화, False: 제한됨) | `false` 또는 `true`                              |
    | db_id        | string  | null 가능                      | 케릭터 DB ID                             | `"123e4567-e89b-12d3-a456-426614174000"`          |
    | user_id      | string  | null 가능, 1-50자              | 유저 ID                                  | `"shaa97102"`                                     |
  - **필수 필드**: `input_data`
  - **응답**: 모델이 생성한 텍스트 응답

#### 📌 GPT 모델
- **`POST /office/{gpt_set}`**
  - **설명**: gpt 모델에 질문을 입력하고 응답을 JSON 방식으로 반환합니다.
  - **GPT 모델명 (gpt_set)**: 

    | gpt_set 값값 | 실제 모델 ID | 요청 유형 | 사용 예시 |
    | --- | --- | --- | --- |
    | `gpt4o_mini` | `gpt-4o-mini` | post | `/office/gpt4o_mini` |
    | `gpt4.1` | `gpt-4.1` | post | `/office/gpt4.1` |
    | `gpt4.1_mini` | `gpt-4.1-mini` | post | `/office/gpt4.1_mini` |

  - **요청 본문**
    ```json
    {
      "input_data": "Llama AI 모델의 출시일과 버전들을 각각 알려줘.",
      "google_access": false,
      "db_id": "123e4567-e89b-12d3-a456-426614174000",
      "user_id": "shaa97102"
    }
    ```
    | 필드명       | 타입    | 제약조건                       | 설명                                     | 예시                                              |
    | ------------ | ------- | ------------------------------ | ---------------------------------------- | ------------------------------------------------- |
    | input_data   | string  | minLength=1, maxLength=500     | 사용자 입력 문장                        | `"Llama AI 모델의 출시일과 버전들을 각각 알려줘."` |
    | google_access| boolean | 기본값: false                  | 검색 기반 액세스 (True: 활성화, False: 제한됨) | `false` 또는 `true`                              |
    | db_id        | string  | null 가능                      | 케릭터 DB ID                             | `"123e4567-e89b-12d3-a456-426614174000"`          |
    | user_id      | string  | null 가능, 1-50자              | 유저 ID                                  | `"shaa97102"`                                     |
  - **필수 필드**: `input_data`
  - **응답**: 모델이 생성한 텍스트 응답


---

### 🔹 Character 모델 (캐릭터 기반 대화 모델)

#### 📌 Llama 모델 (DarkIdol-Llama-3.1-8B)
- **`POST /character/Llama`**
  - **설명**: DarkIdol-Llama-3.1-8B 모델이 캐릭터 설정을 기반으로 응답을 생성합니다.
  - **요청 본문**
    ```json
    {
        "input_data": "*엘리스에게 다가가서 말을 건다* 안녕?",
        "character_name": "엘리스",
        "greeting": "*햇살이 부드럽게 비치는 정원에서 엘리스가 책을 읽으며 미소 짓고 있습니다.**금발 머리카락이 리본 아래에서 반짝이며, 그녀의 파란 드레스는 바람에 살짝 흔들립니다. 그녀의 곁에는 빨간 곰 인형이 놓여 있습니다.*\"안녕하세요! 오늘은 어떤 이야기를 함께 만들어볼까요? 상상 속에서라면 뭐든 가능하답니다!\"*그녀의 눈동자는 호기심으로 반짝이며, 새로운 모험을 기대하는 듯합니다.*",
        "context": "엘리스는 17세의 호기심 많고 상상력이 풍부한 소녀입니다. 그녀는 동화 속에서 튀어나온 듯한 매력을 지니고 있으며, 항상 새로운 모험을 꿈꿉니다.키는 160cm이며, 금발의 긴 머리카락과 파란 눈동자를 가지고 있습니다. 그녀는 리본 장식이 달린 드레스를 즐겨 입으며, 항상 곰 인형을 곁에 두고 다닙니다.성격은 온화하고 다정하며, 누구와도 쉽게 친해질 수 있는 친화력을 가지고 있습니다. 그녀는 상상 속에서 새로운 이야기를 만들어내는 것을 좋아하며, 주변 사람들에게도 그 즐거움을 나누고 싶어 합니다.취미는 독서, 정원에서 산책하기, 그리고 곰 인형과 함께 새로운 이야기를 상상하는 것입니다. 그녀는 특히 동화책을 좋아하며, 그 속에서 영감을 얻어 자신만의 세계를 만들어갑니다.엘리스는 주변 사람들에게 따뜻함과 희망을 전하며, 함께 있는 것만으로도 행복을 느끼게 하는 특별한 존재입니다.",
        "db_id": "123e4567-e89b-12d3-a456-426614174000",
        "user_id": "shaa97102"
    }
    ```
    | 필드명         | 타입    | 제약조건                  | 설명                                     | 예시                                    |
    | -------------- | ------- | ------------------------- | ---------------------------------------- | --------------------------------------- |
    | input_data     | string  | minLength=1, maxLength=500| 사용자 입력 문장                        | `"*엘리스에게 다가가서 말을 건다* 안녕?"` |
    | character_name | string  | minLength=1               | 케릭터 이름                             | `"엘리스"`                              |
    | greeting       | string  | minLength=1               | 케릭터 인사말                           | 긴 인사말 텍스트                        |
    | context        | string  | minLength=1               | 케릭터 설정 값                           | 캐릭터의 배경, 성격 등에 대한 설명 텍스트  |
    | db_id          | string  | null 가능                 | 케릭터 DB ID                             | `"123e4567-e89b-12d3-a456-426614174000"` |
    | user_id        | string  | null 가능, 1-50자         | 유저 ID                                  | `"shaa97102"`                           |
  - **필수 필드**: `input_data`, `character_name`, `greeting`, `context`
  - **응답**: 캐릭터 역할의 모델이 생성한 텍스트 응답

#### 📌 GPT 모델
- **`POST /character/{gpt_set}`**
  - **설명**: gpt 모델에 질문을 입력하고 응답을 JSON 방식으로 반환합니다.
  - **GPT 모델명 (gpt_set)**: 

    | gpt_set 값값 | 실제 모델 ID | 요청 유형 | 사용 예시 |
    | --- | --- | --- | --- |
    | `gpt4.1` | `gpt-4.1` | post | `/character/gpt4.1` |
    | `gpt4.1_mini` | `gpt-4.1-mini` | post | `/character/gpt4.1_mini` |

  - **요청 본문**
    ```json
    {
        "input_data": "*엘리스에게 다가가서 말을 건다* 안녕?",
        "character_name": "엘리스",
        "greeting": "*햇살이 부드럽게 비치는 정원에서 엘리스가 책을 읽으며 미소 짓고 있습니다.**금발 머리카락이 리본 아래에서 반짝이며, 그녀의 파란 드레스는 바람에 살짝 흔들립니다. 그녀의 곁에는 빨간 곰 인형이 놓여 있습니다.*\"안녕하세요! 오늘은 어떤 이야기를 함께 만들어볼까요? 상상 속에서라면 뭐든 가능하답니다!\"*그녀의 눈동자는 호기심으로 반짝이며, 새로운 모험을 기대하는 듯합니다.*",
        "context": "엘리스는 17세의 호기심 많고 상상력이 풍부한 소녀입니다. 그녀는 동화 속에서 튀어나온 듯한 매력을 지니고 있으며, 항상 새로운 모험을 꿈꿉니다.키는 160cm이며, 금발의 긴 머리카락과 파란 눈동자를 가지고 있습니다. 그녀는 리본 장식이 달린 드레스를 즐겨 입으며, 항상 곰 인형을 곁에 두고 다닙니다.성격은 온화하고 다정하며, 누구와도 쉽게 친해질 수 있는 친화력을 가지고 있습니다. 그녀는 상상 속에서 새로운 이야기를 만들어내는 것을 좋아하며, 주변 사람들에게도 그 즐거움을 나누고 싶어 합니다.취미는 독서, 정원에서 산책하기, 그리고 곰 인형과 함께 새로운 이야기를 상상하는 것입니다. 그녀는 특히 동화책을 좋아하며, 그 속에서 영감을 얻어 자신만의 세계를 만들어갑니다.엘리스는 주변 사람들에게 따뜻함과 희망을 전하며, 함께 있는 것만으로도 행복을 느끼게 하는 특별한 존재입니다.",
        "db_id": "123e4567-e89b-12d3-a456-426614174000",
        "user_id": "shaa97102"
    }
    ```
    | 필드명         | 타입    | 제약조건                  | 설명                                     | 예시                                    |
    | -------------- | ------- | ------------------------- | ---------------------------------------- | --------------------------------------- |
    | input_data     | string  | minLength=1, maxLength=500| 사용자 입력 문장                        | `"*엘리스에게 다가가서 말을 건다* 안녕?"` |
    | character_name | string  | minLength=1               | 케릭터 이름                             | `"엘리스"`                              |
    | greeting       | string  | minLength=1               | 케릭터 인사말                           | 긴 인사말 텍스트                        |
    | context        | string  | minLength=1               | 케릭터 설정 값                           | 캐릭터의 배경, 성격 등에 대한 설명 텍스트  |
    | db_id          | string  | null 가능                 | 케릭터 DB ID                             | `"123e4567-e89b-12d3-a456-426614174000"` |
    | user_id        | string  | null 가능, 1-50자         | 유저 ID                                  | `"shaa97102"`                           |
  - **필수 필드**: `input_data`, `character_name`, `greeting`, `context`
  - **응답**: 캐릭터 역할의 모델이 생성한 텍스트 응답

---

## 🛠 응답 구조

### 일반 응답
- **정상 응답**: 
  ```json
  {
    "result": "모델이 생성한 응답 텍스트",
    "_links": [
      {
        "href": "현재 URL",
        "rel": "_self",
        "type": "post"
      },
      {
        "href": "다른 모델 URL",
        "rel": "모델_이름",
        "type": "post"
      }
    ]
  }